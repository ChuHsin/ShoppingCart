(this["webpackJsonpreact-chat"]=this["webpackJsonpreact-chat"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(11)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(3),o=n.n(s),c=(n(9),n(1));n(10);function i(e){return e.messages.map((function(t){return r.a.createElement("li",null,r.a.createElement("div",{className:"message"},r.a.createElement("div",{className:"meta-info"},r.a.createElement("div",{className:"sender-info"},r.a.createElement("span",{className:"username"},e.users[t.sender].username)),r.a.createElement("div",{className:"message-info"},r.a.createElement("span",{className:"timestamp"},t.timestamp))),r.a.createElement("p",{className:"message-text"},t.text)))}))}var u=function(e){var t=e.username,n=e.setUsername,a=e.setMessage,s=e.setLoginStatus,o=e.setErrorMessage;return r.a.createElement("div",{className:"login"},r.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}),r.a.createElement("button",{onClick:function(){(function(e){return fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch((function(){return Promise.reject({code:"There is a networkerror"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(t).then((function(e){var t=i(e);a(t),s("YES"),o("")})).catch((function(e){o(e.code)}))}},"Login"))},m=function(e){var t=e.inputMessage,n=e.setInputMessage,a=e.username,s=e.setUsername,o=e.setMessage,c=e.setLoginStatus,u=e.setErrorMessage;return r.a.createElement("div",{className:"input-area"},r.a.createElement("div",{className:"login-username"},"Username: ",a),r.a.createElement("input",{className:"to-send",value:t,name:"text",placeholder:"Enter message to send",onChange:function(e){return n(e.target.value)}}),r.a.createElement("button",{onClick:function(){var e;(e=t,fetch("/sendMessage",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({message:e})}).catch((function(){return Promise.reject({code:"There is a network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))).then((function(e){var t=i(e);o(t),n(""),u("")})).catch((function(e){u(e.code)}))}},"Send"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){fetch("/session/",{method:"DELETE"}).catch((function(){return Promise.reject({code:"There is a network-error"})})).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject(e)}))})).then((function(){c("NO"),o("The Chat Room"),s(""),u("")})).catch((function(e){u(e.code)}))}},"Logout"))};var l=function(e){var t=e.loginStatus,n=e.setLoginStatus,s=e.errorMessage,o=e.setErrorMessage,l=Object(a.useState)("The Chat Room"),f=Object(c.a)(l,2),g=f[0],h=f[1],d=Object(a.useState)(""),E=Object(c.a)(d,2),v=E[0],p=E[1],j=Object(a.useState)(""),S=Object(c.a)(j,2),M=S[0],N=S[1],b="";b="YES"===t?r.a.createElement(m,{inputMessage:v,setInputMessage:function(e){return p(e)},username:M,setUsername:function(e){return N(e)},message:g,setMessage:function(e){return h(e)},loginStatus:t,setLoginStatus:function(e){return n(e)},errorMessage:s,setErrorMessage:function(e){o(e)}}):r.a.createElement(u,{username:M,setUsername:function(e){return N(e)},message:g,setMessage:function(e){return h(e)},loginStatus:t,setLoginStatus:function(e){return n(e)},errorMessage:s,setErrorMessage:function(e){o(e)}}),Object(a.useEffect)((function(){"NO"===t&&fetch("/session",{method:"GET"}).catch((function(){return console.log("catched"),Promise.reject({code:"There is a network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){e&&(n("YES"),h(i(e)),o(""))})).catch((function(e){o(e.code)}))}),[]);var O="blank";return g&&(O="info"),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:O},g),r.a.createElement("div",{className:"login-status"},"Logged In: ",t),b)};var f=function(e){var t=e.errorMessage;return r.a.createElement("div",{className:"error-message"},t)};var g=function(){var e=Object(a.useState)("NO"),t=Object(c.a)(e,2),n=t[0],s=t[1],o=Object(a.useState)(""),i=Object(c.a)(o,2),u=i[0],m=i[1];return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("div",null,r.a.createElement(l,{loginStatus:n,setLoginStatus:function(e){s(e)},errorMessage:u,setErrorMessage:function(e){m(e)}}),r.a.createElement(f,{errorMessage:u,setErrorMessage:function(e){m(e)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[4,1,2]]]);
//# sourceMappingURL=main.d7266789.chunk.js.map