(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],[,,,,,function(e,t,a){e.exports=a(12)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(4),o=a.n(c),s=(a(10),a(11),a(2)),u={username:"",isLoading:!1,error:"",isLoggedIn:!1},i=function(){return fetch("/items/",{method:"GET"}).catch((function(){return Promise.reject({code:"There is a network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e.message)}))}))};var l=function(){var e=Object(r.useContext)(T),t=Object(r.useContext)(S);return n.a.createElement("div",{className:"login-box"},n.a.createElement("h2",null,"Null Foods Market"),n.a.createElement("div",{className:"user-box"},n.a.createElement("input",{type:"text",placeholder:"Input Your Username",onChange:function(t){e({type:"input",payload:{username:t.target.value}})}}),n.a.createElement("label",null,"Username")),n.a.createElement("a",{onClick:function(){var a;e({type:"login"}),(a=t.username,fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:a})}).catch((function(){return Promise.reject({code:"There is a networkerror"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e.message)}))}))).then((function(t){e({type:"success",payload:{username:t.data.username}})})).catch((function(t){console.log(t),e({type:"error",payload:{error:t}})}))}},"Login"))};var m=function(){var e=Object(r.useContext)(T);return n.a.createElement("button",{className:"logout-button",onClick:function(){fetch("/session/",{method:"DELETE"}).catch((function(){return Promise.reject({code:"There is a network-error"})})).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(){e({type:"logout"})})).catch((function(t){e({type:"logout"}),e({type:"error",payload:{error:t}})}))}}," Logout ")};var d=function(e){var t=Object(r.useContext)(w),a=Object(r.useContext)(I),c=t.items;return t.addItemBox?n.a.createElement("span",null):n.a.createElement("div",{className:"product-social-icons"},n.a.createElement("span",{onClick:function(){a({type:"showAddBox",payload:{items:[c[e.id]]}})}}," Add to Cart "))};var h=function(){var e=Object(r.useContext)(w),t=e.items,a=e.cate,c=e.keyWords,o=Object.keys(t);return(o=function(e,t,a){var r=[];return""!==e&&(console.log(e),t.forEach((function(t){console.log(a[t].itemName.replace(/\s+/g,"").toLowerCase().indexOf(e)),a[t].itemName.replace(/\s+/g,"").toLowerCase().indexOf(e)>=0&&r.push(t)})),t=r,console.log(t)),t}(c,o=function(e,t,a){var r=[];return""!==e&&(t.forEach((function(t){a[t].itemCategory===e&&r.push(t)})),t=r),t}(a,o,t),t)).map((function(e){return n.a.createElement("div",{className:"product-card"},n.a.createElement("img",{className:"product-image",src:t[e].picture,alt:"Product",height:"180",width:"170"}),n.a.createElement("div",{className:"product-image-title"},n.a.createElement("p",null,"Unit Price: $",t[e].itemUnitPrice),n.a.createElement("p",null,"Stock: ",t[e].itemStock)),n.a.createElement("div",{className:"product-description"},n.a.createElement("h5",null," ",t[e].itemName)),n.a.createElement(d,{id:t[e].itemId}))}))};var p=function(){var e=Object(r.useContext)(w).keyWords,t=Object(r.useContext)(I),a=Object(r.useContext)(T);return n.a.createElement("div",{className:"search-bar"},n.a.createElement("input",{defaultValue:e,onChange:function(e){!function(e){t({type:"inputKeyWords",payload:{keyWords:e.target.value}})}(e)}}),n.a.createElement("button",{onClick:function(){i().then((function(e){t({type:"showItemsOfKeyWords",payload:{items:e.data}})})).catch((function(e){a({type:"error",payload:{error:e}})}))}}," Search "))};var f=function(){var e=Object(r.useContext)(T),t=Object(r.useContext)(w),a=Object(r.useContext)(I),c="";function o(){fetch("/items/categories",{method:"GET"}).catch((function(){return Promise.reject({code:"There is a network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e.message)}))})).then((function(e){a({type:"showCates",payload:{cates:e.data}})})).catch((function(t){e({type:"error",payload:{error:t}})}))}return t.searchBar&&(c=n.a.createElement(p,null)),n.a.createElement("div",{className:"search-options"},n.a.createElement("button",{onClick:function(){o()}},"Search By Categories"),n.a.createElement("button",{onClick:function(){a({type:"showSearchBar"})}},"Search By Key Words"),n.a.createElement("button",{onClick:function(){i().then((function(e){a({type:"showItems",payload:{items:e.data}})})).catch((function(t){e({type:"error",payload:{error:t.message}})}))}},"Search By Pictures"),c)},y=function(){var e=Object(r.useContext)(T),t=Object(r.useContext)(w),a=Object(r.useContext)(I),c=t.cates;return Object.keys(c).map((function(t){return n.a.createElement("div",{className:"product-card",onClick:function(){!function(t){i().then((function(r){a({type:"showItemsOfCate",payload:{items:r.data,cate:t}}),e({type:"error",payload:{error:""}})})).catch((function(t){e({type:"error",payload:{error:t}})}))}(t)}},n.a.createElement("img",{className:"product-image",src:""+c[t].picture,alt:"Category",height:"180",width:"170"}),n.a.createElement("div",{className:"product-description"},n.a.createElement("h5",null," ",c[t].category)))}))};var j=function(){var e=Object(r.useContext)(S),t=Object(r.useContext)(T),a=Object(r.useContext)(w),c=Object(r.useContext)(I),o=a.items,s=a.addAmount,u=e.username,i=Object(r.useContext)(B);function l(e){(function(e,t,a){return fetch("/orders/"+e,{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({item:{username:e,itemId:t,addAmount:a}})}).catch((function(){return Promise.reject({code:"There is a networkerror"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e.message)}))}))})(u,e,s).then((function(e){i({type:"showItems",payload:{cartItems:e.data}}),c({type:"showAddBox",payload:{items:o}}),t({type:"error",payload:{error:""}})})).catch((function(e){t({type:"error",payload:{error:e}})}))}return n.a.createElement("div",{className:"add-item"},"Amount: ",n.a.createElement("input",{placeholder:o[0].itemUnit,value:s,onChange:function(e){return function(e){c({type:"updateAddAmount",payload:{addAmount:e.target.value}})}(e)}}),n.a.createElement("button",{onClick:function(){return l(o[0].itemId)}},"Add"))};var E=function(){var e=Object(r.useContext)(P).cartItems;return""!==e?e.map((function(e){return n.a.createElement("li",null,n.a.createElement("div",{className:"item"},n.a.createElement("div",{className:"item-name"},e.itemName),n.a.createElement("div",{className:"item-amount"},e.itemAmount," ",e.itemCount),"@",n.a.createElement("div",{className:"item-unit-price"},"$",e.itemUnitPrice,"/",e.itemUnit),n.a.createElement("div",{className:"item-price"},"$",e.itemPrice)))})):n.a.createElement("div",null)};var b=function(){var e=Object(r.useContext)(P).cartItems;if(""!==e){var t=0;return e.forEach((function(e){t=parseFloat(t)+parseFloat(e.itemPrice)})),t=t.toFixed(2),n.a.createElement("div",{className:"total-price"},"Total: $",t)}return n.a.createElement("div",null)};var v=function(){var e=Object(r.useContext)(S),t=Object(r.useContext)(I),a=e.username,c=Object(r.useContext)(P).cartItems,o=Object(r.useContext)(B);function s(){(function(e,t){return fetch("/orders/"+e,{method:"PUT",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({order:t})}).catch((function(){return Promise.reject({code:"There is a networkerror"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e.message)}))}))})(a,c).then((function(e){o({type:"showItems",payload:{cartItems:e.data}}),t({type:"showSearchBar"})}))}return n.a.createElement("div",{className:"checkout-button"},n.a.createElement("button",{onClick:function(){return s()}},"Checkout"))};var O=function(){var e=Object(r.useContext)(S).username,t=Object(r.useContext)(T),a=Object(r.useContext)(B);return Object(r.useEffect)((function(){(function(e){return fetch("/orders/"+e,{method:"GET"}).catch((function(){return Promise.reject({code:"There is a network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e.message)}))}))})(e).then((function(e){a({type:"showItems",payload:{cartItems:e.data}})})).catch((function(e){t({type:"error",payload:{error:e}})}))}),[a,e,t]),n.a.createElement("div",{className:"cart"},n.a.createElement("p",null,"Your Cart"),n.a.createElement(E,null),n.a.createElement(b,null),n.a.createElement("div",{className:"checkout-button"},n.a.createElement(v,null)))},g=a(1);var C=function(e,t){switch(t.type){case"showCates":return Object(g.a)(Object(g.a)({},e),{},{cates:t.payload.cates,cate:"",items:"",keyWords:"",searchBar:!1,addItemBox:!1});case"showItems":return Object(g.a)(Object(g.a)({},e),{},{items:t.payload.items,cate:"",cates:"",keyWords:"",searchBar:!1,addItemBox:!1});case"showItemsOfCate":return Object(g.a)(Object(g.a)({},e),{},{items:t.payload.items,cate:t.payload.cate,cates:"",keyWords:"",searchBar:!1,addItemBox:!1});case"showItemsOfKeyWords":return Object(g.a)(Object(g.a)({},e),{},{items:t.payload.items,cate:"",cates:"",searchBar:!0,addItemBox:!1});case"showSearchBar":return Object(g.a)(Object(g.a)({},e),{},{items:"",cate:"",cates:"",keyWords:"",searchBar:!0,addItemBox:!1});case"inputKeyWords":return Object(g.a)(Object(g.a)({},e),{},{cate:"",cates:"",keyWords:t.payload.keyWords,searchBar:!0,addItemBox:!1});case"showAddBox":return Object(g.a)(Object(g.a)({},e),{},{items:t.payload.items,cate:"",cates:"",keyWords:"",addAmount:0,searchBar:!1,addItemBox:!0});case"updateAddAmount":return Object(g.a)(Object(g.a)({},e),{},{cate:"",cates:"",keyWords:"",addAmount:t.payload.addAmount,searchBar:!1,addItemBox:!0});default:return e}};var x=function(e,t){switch(t.type){case"showItems":return Object(g.a)(Object(g.a)({},e),{},{cartItems:t.payload.cartItems,subTotal:"",itemsNumber:0});default:return e}},k={cartItems:"",subTotal:"",itemsNumber:0},N={cates:"",items:"",cate:"",keyWords:"",searchBar:!1,addItemBox:!1,addAmount:0},w=n.a.createContext(),I=n.a.createContext(),P=n.a.createContext(),B=n.a.createContext();var A=function(){var e=Object(r.useContext)(S).username,t=Object(r.useReducer)(C,N),a=Object(s.a)(t,2),c=a[0],o=a[1],u=c.addItemBox,l=Object(r.useReducer)(x,k),d=Object(s.a)(l,2),p=d[0],E=d[1],b=Object(r.useContext)(T);Object(r.useEffect)((function(){i().then((function(e){o({type:"showItems",payload:{items:e.data}})})).catch((function(e){b({type:"error",payload:{error:e}})}))}),[b]);var v="";return u&&(v=n.a.createElement(j,null)),n.a.createElement("div",{className:"content"},n.a.createElement(I.Provider,{value:o},n.a.createElement(w.Provider,{value:c},n.a.createElement(B.Provider,{value:E},n.a.createElement(P.Provider,{value:p},n.a.createElement("div",{className:"products-interface"},n.a.createElement("p",{className:"title-text"},"Explore Products"),n.a.createElement(f,null),n.a.createElement(y,null),n.a.createElement(h,null),v),n.a.createElement("div",{className:"cart-interface"},"User: ",e,n.a.createElement(m,null),n.a.createElement(O,null)))))))};var W=function(e,t){switch(t.type){case"login":return Object(g.a)(Object(g.a)({},e),{},{isLoading:!0,error:""});case"logout":return Object(g.a)(Object(g.a)({},e),{},{isLoggedIn:!1,username:"",error:"",isLoading:!1});case"success":return Object(g.a)(Object(g.a)({},e),{},{username:t.payload.username,isLoggedIn:!0,isLoading:!1});case"error":return Object(g.a)(Object(g.a)({},e),{},{error:t.payload.error,isLoading:!1});case"input":return Object(g.a)(Object(g.a)({},e),{},{username:t.payload.username});default:return e}},T=n.a.createContext(),S=n.a.createContext();var L=function(){var e=Object(r.useReducer)(W,u),t=Object(s.a)(e,2),a=t[0],c=t[1],o=a.error,i=a.isLoggedIn,m=n.a.createElement("div",{className:"login"},n.a.createElement(T.Provider,{value:c},n.a.createElement(S.Provider,{value:a},n.a.createElement("div",{className:"login-area"},n.a.createElement("div",{className:"error-message"},o),n.a.createElement("p",{className:"title-text"},"Welcome to Null Foods Market!"),n.a.createElement(l,null)))));return i&&(m=n.a.createElement(T.Provider,{value:c},n.a.createElement(S.Provider,{value:a},n.a.createElement("div",{className:"error-message"},o),n.a.createElement(A,null)))),n.a.createElement("div",null,m)};var U=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement(L,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[5,1,2]]]);
//# sourceMappingURL=main.6271d20d.chunk.js.map