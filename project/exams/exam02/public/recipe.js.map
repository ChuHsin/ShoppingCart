{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/recipe.js","webpack:///./src/services.js"],"names":["iife","appState","pollId","isLoggedIn","recipes","error","renderLogin","show","login","document","querySelector","innerHTML","renderLogout","logout","addRecipe","renderErrors","text","renderRecipes","list","Object","keys","map","id","title","author","join","renderHomePage","renderAddRecipeForm","renderDetails","homePage","recipe","details","ingredients","instructions","addEventListener","e","target","classList","contains","renderPage","username","value","length","fetchLogIn","then","err","code","preventDefault","fetchLogOut","toAdd","recipeId","Math","floor","random","disabled","newRecipeDetails","newRecipe","fetchAddRecipe","fetchSingleRecipe","response","parentNode","dataset","fetchLoginStatus","fetchRecipes","fetch","method","headers","Headers","body","JSON","stringify","Promise","reject","ok","json","result","console","log"],"mappings":"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","file":"recipe.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/recipe.js\");\n","\nimport {\n    fetchLogIn,\n    fetchLoginStatus,\n    fetchRecipes,\n    fetchAddRecipe,\n    fetchLogOut,\n    fetchSingleRecipe,\n} from './services';\n(function iife() {\n    const appState = {\n        pollId: null,\n        isLoggedIn: false,\n        recipes: [],\n        error: '',\n    };\n\n    function renderLogin(show) {\n        const login = document.querySelector('.login');\n        if (show) {\n            login.innerHTML = `\n    <label>Username: <input class=\"to-input\"/></label>\n    <button class=\"to-login\" type=\"button\">Login</button>\n  `;\n        } else {\n            login.innerHTML = ``;\n        }\n    }\n\n    function renderLogout(show) {\n        const logout = document.querySelector('.logout');\n        const addRecipe = document.querySelector('.add-recipe');\n        if (show) {\n            logout.innerHTML = `<button class=\"to-logout\" type=\"button\">Logout</button>`;\n            addRecipe.innerHTML = `<button class=\"to-add-recipe\" type=\"button\">Add New Recipe</button>`\n        } else {\n            logout.innerHTML = ``;\n            addRecipe.innerHTML = ``;\n        }\n    }\n\n    function renderErrors(text) {\n        document.querySelector('.status').innerHTML = text;\n    }\n\n    function renderRecipes(show, list) {\n        if (!show) {\n            const recipes = document.querySelector('.recipes');\n            recipes.innerHTML = ``;\n        } else {\n            const recipes = document.querySelector('.recipes');\n            recipes.innerHTML = Object.keys(list).map(\n                (id) =>\n                    `<li class=\"recipe\" data-id=\"${id}\">\n                <span class=\"tag\"> Title: </span> <span class=\"content\">${list[id].title}</span>  \n                <span class=\"tag\"> Author: </span> <span class=\"content\">${list[id].author}</span></li>\n                `).join('');\n        }\n        renderHomePage(false);\n\n    }\n\n    function renderAddRecipeForm(show) {\n        if (!show) {\n            const addRecipe = document.querySelector('.add-recipe');\n            addRecipe.innerHTML = ``;\n        } else {\n            const addRecipe = document.querySelector('.add-recipe');\n            addRecipe.innerHTML = `\n            <div><label class=\"tag\"> Title: </label><input class=\"title\"></input><br></div>\n            <div><label class=\"tag\"> Ingredients:</label><br><textarea  class=\"ingredients\" placeholder=\"Input ingredients here...\" rows=\"4\" cols=\"50\"></textarea><br></div>\n            <div><label class=\"tag\"> Instructions:</label><br> <textarea  class=\"instructions\" placeholder=\"Input instuctions here...\" rows=\"4\" cols=\"50\"></textarea><br></div>\n            <button class=\"to-add\" type=\"button\"> Add Recipe </button>\n`\n            renderDetails(false);\n            renderRecipes(false);\n            renderHomePage(true);\n\n        }\n    }\n    function renderHomePage(show) {\n        const homePage = document.querySelector('.homepage');\n\n        if (!show) {\n            homePage.innerHTML = ``;\n        } else {\n            homePage.innerHTML = `<button class=\"to-homepage\" type=\"button\"> Home Page </button>`\n        }\n    }\n\n    function renderDetails(show, recipe) {\n        if (!show) {\n            const details = document.querySelector('.details');\n            details.innerHTML = ``;\n        } else {\n            const details = document.querySelector('.details');\n            details.innerHTML = `\n                <div class=\"title\"><span class=\"tag\"> Title: </span><span class=\"content\">${recipe.title}</span><br></div>\n                <div class=\"author\"><span class=\"tag\"> Author: </span><span class=\"content\">${recipe.author}</span><br></div>\n                <div class=\"ingredients\"><span class=\"tag\"> Ingredients:</span><br><span class=\"content\">\n                ${recipe.ingredients}</span><br></div>\n                <div class=\"instructions\"><span class=\"tag\"> Instructions:</span><br><span class=\"content\">\n                ${recipe.instructions}</span><br></div>\n                `;\n            renderRecipes(false);\n            renderHomePage(true);\n        }\n\n    }\n\n    const homePage = document.querySelector('.homepage');\n    homePage.addEventListener('click', (e) => {\n        if (!e.target.classList.contains('to-homepage')) {\n            return;\n        }\n        renderPage();\n    })\n\n    function renderPage() {\n        if (!appState.isLoggedIn) {\n            renderLogin(true);\n            renderLogout(false);\n            renderRecipes(true, appState.recipes);\n            renderDetails(false);\n        } else {\n            renderLogin(false);\n            renderLogout(true);\n            renderRecipes(true, appState.recipes);\n            renderDetails(false);\n\n        }\n        renderErrors(appState.error);\n    }\n\n    const login = document.querySelector('.login');\n    login.addEventListener('click', (e) => {\n        if (!e.target.classList.contains('to-login')) {\n            return;\n        }\n\n        const username = document.querySelector('.to-input').value;\n        if(username.length > 0) {\n            fetchLogIn(username)\n            .then((list) => {\n                appState.isLoggedIn = true;\n                appState.recipes = list;\n                appState.error = '';\n                renderPage();\n            })\n            .catch((err) => {\n                appState.error = err.code;\n                renderPage();\n            });\n        } else {\n            appState.error = \"You must input a username.\";\n            renderPage();\n        }\n    });\n\n    const logout = document.querySelector('.logout');\n\n    logout.addEventListener('click', (e) => {\n        e.preventDefault();\n        if (!e.target.classList.contains('to-logout')) {\n            return;\n        }\n\n        fetchLogOut() // 返回了错误\n            .then(() => {\n                appState.isLoggedIn = false;\n                appState.error = '';\n                renderPage();\n            })\n            .catch((err) => {\n                appState.isLoggedIn = false;\n                appState.error = err.code;\n                renderPage();\n            });\n    });\n\n    const addRecipe = document.querySelector('.add-recipe');\n    addRecipe.addEventListener('click', (e) => {\n        if (!e.target.classList.contains('to-add-recipe')) { return; }\n        renderAddRecipeForm(true);\n\n\n        const toAdd = document.querySelector('.to-add');\n        const title = document.querySelector('.title');\n        const instructions = document.querySelector('.instructions');\n        const ingredients = document.querySelector('.ingredients');\n        const recipeId = Math.floor(Math.random() * 10000);\n\n        toAdd.disabled = true;\n        title.addEventListener('input', (e) => {\n            toAdd.disabled = !(title.value.length > 0 && instructions.value.length > 0 && ingredients.value.length > 0);\n        })\n        instructions.addEventListener('input', (e) => {\n            toAdd.disabled = !(instructions.value.length > 0 && instructions.value.length > 0 && ingredients.value.length > 0);\n        })\n        ingredients.addEventListener('input', (e) => {\n            toAdd.disabled = !(ingredients.value.length > 0 && instructions.value.length > 0 && ingredients.value.length > 0);\n        })\n\n        toAdd.addEventListener('click', (e) => {\n            const newRecipeDetails = {\n                title: `${title.value} `,\n                ingredients: `${ingredients.value} `,\n                instructions: `${instructions.value} `,\n                id: `${recipeId} `,\n            }\n            const newRecipe = { recipeId, newRecipeDetails }\n            fetchAddRecipe(newRecipe)\n                .then((list) => {\n                    appState.recipes = list;\n                    appState.error = '';\n                })\n                .catch((err) => {\n                    appState.error = err.code;\n                    renderPage();\n                })\n                .then(() => {\n                    fetchSingleRecipe(recipeId)\n                        .then(response => {\n                            renderDetails(true, response);\n                            renderAddRecipeForm(false);\n                        }\n                        )\n                })\n\n        });\n    });\n\n    const list = document.querySelector(\".recipes\");\n    list.addEventListener('click', (e) => {\n        if (e.target.parentNode.classList.contains('recipe')) {\n            const id = e.target.parentNode.dataset.id;\n            fetchSingleRecipe(id)\n                .then(recipe => {\n                    renderDetails(true, recipe);\n                })\n        }\n    });\n\n    // Initial load \n    fetchLoginStatus()\n        .then(() => {\n            appState.isLoggedIn = true;\n            renderPage();\n            fetchRecipes()\n                .catch((err) => {\n                    appState.error = err.code;\n                    renderPage();\n                })\n                .then(list => {\n                    appState.error = '';\n                    appState.recipes = list;\n                    renderPage();\n                })\n        })\n        .catch((err) => {\n            appState.error = err.code;\n            appState.isLoggedIn = false;\n            renderPage();\n            fetchRecipes()\n                .catch((err) => {\n                    appState.error = err.code;\n                    renderPage();\n                })\n                .then(list => {\n                    appState.error = '';\n                    appState.recipes = list;\n                    renderPage();\n                })\n        })\n\n})();","export const fetchLogIn = (username) => {\n    return fetch('/session', {\n        method: 'POST',\n        headers: new Headers({\n            'content-type': 'application/json',\n        }),\n        body: JSON.stringify({ username }),\n    })\n        .catch(() => { \n            return Promise.reject({ code: 'There is a network-error' });\n        })\n        .then((response) => { \n            if (!response.ok) { \n                return response.json().then(result => Promise.reject(result));\n            }\n            return response.json(); \n        });\n}\n\nexport const fetchLogOut = () => {\n    return fetch('/session/logout', {\n        method: 'POST',\n\n    })\n        .catch(() => {\n            return Promise.reject({ code: 'There is a network-error' });\n        })\n        .then((response) => {\n            if (!response.ok) {\n                return response.json().then(result => Promise.reject(result));\n            }\n            return response; \n        });\n};\n\nexport const fetchLoginStatus = () => {\n    return fetch('/session', {\n        method: 'GET',\n    })\n        .catch(() => {\n            console.log('catched');\n            return Promise.reject({ code: 'There is a network-error' });\n        })\n        .then((response) => {\n            if (!response.ok) {\n                return response.json().then(result => Promise.reject(result));\n            }\n            console.log('responsed');\n            return;\n        });\n};\n\nexport const fetchRecipes = () => {\n    return fetch('/recipes', {\n        method: 'GET',\n    })\n        .catch(() => {\n            return Promise.reject({ code: 'There is a network-error' });\n        })\n        .then((response) => {\n            if (!response.ok) {\n                return Promise.reject({ code: 'Getting recipes failed' });\n            }\n            return response.json();\n        });\n};\n\nexport const fetchAddRecipe = (recipe) => {\n    return fetch('/recipes', {\n        method: \"POST\",\n        headers: new Headers({\n            'content-type': 'application/json',\n        }),\n        body: JSON.stringify({ recipe }),\n    })\n        .catch(() => {\n            return Promise.reject({ code: 'There is a network-error' });\n        })\n        .then((response) => {\n            if (!response.ok) {\n                return response.json().then(result => Promise.reject(result));\n            }\n            return response.json();\n        });\n};\n\nexport const fetchSingleRecipe = (id) => {\n    return fetch('/recipes/' + id, {\n        method: \"GET\",\n    })\n        .catch(() => {\n            return Promise.reject({ code: 'There is a network-error' });\n        })\n        .then((response) => {\n            if (!response.ok) {\n                return Promise.reject({ code: 'Getting details failed' });\n            }\n            return response.json();\n        });\n}"],"sourceRoot":""}